# HTTP

http是超文本传输协议在互联网上应用最为广泛的一种网络协议，所有www文件都必须遵守这个标准，基于TCP/IP通信协议来传递数据（HTML 文件, 图片文件, 查询结果等）连接。

#  HTTPS

https是超文本传输安全协议，是一种网络安全传输协议。http协议传输的数据都没有加密，一些私密的信息不安全，https经由超文本传输协议（http）进行通信，利用SSL/TLS协议来加密数据包，https开发的主要目的就是为了保护数据传输的安全性。

TLS/SSL协议不仅仅是一套加密传输的协议，TLS/SSL中使用了非对称加密，对称加密以及HASH算法 

# HTTPS和HTTP的区别：

1） https协议要到ca申请证书，需要一定经济成本；

2） HTTP协议运行在TCP之上，所有传输的内容都是**明文**，HTTPS运行在SSL/TLS之上，SSL/TLS运行在TCP之上，所有传输的内容都经过**加密**的

3） 连接的端口不一样，http是80，https是443；

4）http连接很简单，没有状态；https是ssl加密的传输，身份认证的网络协议，相对http传输比较安全。

HTTP + 加密 + 认证 + 完整性保护 == HTTPS



# HTTPS握手过程

1. 客户端发送请求，支持的加密协议到服务端 、 服务端返回公钥和证书到客户端 
2. 客户端证书验证 生成对称密钥随机数 公钥对其加密,发送到服务端 
3. 服务器私钥解密发来的公钥，用公钥加密数据。建立通信 

握手过程的简单描述如下：

1. 浏览器将自己支持的**一套加密规则发送给网站**。

2. 网站从中选出一组加密算法与HASH算法，并将自己的身份信息**以证书的形式发回给浏览器**。证书里面包含了网站地址，加密公钥，以及证书的颁发机构等信息。

3. 获得网站证书之后浏览器要做以下工作：

   a) **验证证书的合法性**（颁发证书的机构是否合法，证书中包含的网站地址是否与正在访问的地址一致等），如果证书受信任，则浏览器栏里面会显示一个小锁头，否则会给出证书不受信的提示。

   b) 如果证书受信任，或者是用户接受了不受信的证书，浏览器会**生成一串随机数的密码，并用证书中提供的公钥加密**。

   c) 使用约定好的HASH计算握手消息，并使用生成的随机数对消息进行加密，最后**将之前生成的所有信息发送给网站**。

4. 网站接收浏览器发来的数据之后要做以下的操作：

   a) 使用自己的**私钥将信息解密取出密码**，**使用密码解密浏览器发来的握手消息**，并**验证HASH是否与浏览器发来的一致**。

   b) 使用密码加密一段握手消息，发送给浏览器。

5. 浏览器解密并计算握手消息的HASH，如果与服务端发来的HASH一致，此时握手过程结束，之后所有的通信数据将由之前浏览器生成的随机密码并利用对称加密算法进行加密。

这里浏览器与网站互相发送加密的握手消息并验证，目的是为了保证双方都获得了一致的密码，并且可以正常的加密解密数据。其中**非对称加密算法用于在握手过程中加密生成的密码，对称加密算法用于对真正传输的数据进行加密**，而**HASH算法用于验证数据的完整性**。由于浏览器生成的密码是整个数据加密的关键，因此在传输的时候使用了非对称加密算法对其加密。非对称加密算法会生成公钥和私钥，公钥只能用于加密数据，因此可以随意传输，而网站的私钥用于对数据进行解密，所以网站都会非常小心的保管自己的私钥，防止泄漏