# 写在前面

Linux中文件被分为两部分：用户数据和元数据

+ 用户数据：即文件数据块，是记录文件真实内容的地方
+ 元数据：文件的附加属性，如文件大小、创建时间、所有者等信息

在Linux中，元数据中的inode号（inode是文件元数据的一部分，但是并不包含文件名，inode号即索引节点号）才是文件的唯一标识而非文件名

文件名仅是为了方便人们的记忆和使用，系统或程序通过inode号寻找正确的文件数据块

在Linux系统中可以使用 ls -i 命令查看inode号，将同一个文件重新命名后，会发现其inode号始终相同，即可验证inode才是文件的唯一标识

# 软硬链接

为解决文件的共享使用，Linux 引入了两种链接：硬链接 与 软链接

链接为Linux系统解决了文件的共享使用，还可以隐藏文件路径、增加权限安全、节省存储等

## 硬链接

若一个inode号对应多个文件名，则称这些文件为硬链接，即硬链接就是同一个文件使用了多个别名

> 创建硬链接
>
> link oldfile newfile
>
> ln oldfile newfile

特点：

+ 文件有相同的inode及date block
+ 只能对已存在的文件进行创建
+ 不能交叉文件系统进行硬链接的创建
+ 不能对目录进行创建，只能对文件创建
+ 删除一个硬链接文件并不影响其他有相同inode号的文件

【注】：

Linux文件系统中的目录中均隐藏了两个特殊的目录：当前目录(.) 和 父目录(..)，查看这两个特殊目录的inode号可知其实这两个目录就是两个硬链接，若系统允许对目录创建硬链接，则会产生目录环

## 软链接

若文件用户数据块中存放的内容是另一个文件的路径名的指向，则该文件就是软链接。

软链接就是一个普通文件，只是数据块内容有点特殊，软链接有着自己的inode号以及用户数据块，因此软链接的创建与哪个没有类似 硬链接的诸多限制

+ 软链接有自己的文件属性及权限等
+ 可对不存在的文件或目录创建软链接---->死链接
+ 软链接可交叉文件系统
+ 软链接可对文件或目录创建
+ 创建软链接时，连接计数不会增加
+ 删除软连接并不影响被指向的文件，但若被指向的原文件被删除，则相关软链接被称为死链接（若被指向路径文件被重新创建，死链接可恢复为正常的软链接 ）

> 创建软链接
>
> ln -s oldfile newfile



# 相关命令

> 查看当前系统已挂着的文件系统类型
>
> \#  df
>
> \# mount
>
> 查看 /proc/mounts

> // 查找在路径 /home 下的文件 data.txt 的软链接
>
> \# find /home -lname data.txt 
>
> // 查看路径 /home 有相同 inode 的所有硬链接
>
> \# find /home -samefile filename
>
> \# find /home -inum 660650 
>
> // 列出路径 /home下的所有软链接文件
>
> \# find /home -type l -ls 